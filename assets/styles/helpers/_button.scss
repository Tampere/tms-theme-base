/**
 * Button class generator
 * sass-lint:disable no-important
 */

$button-colors: $colors !default;

$button-color: $primary-invert !default;
$button-color-hover: $dark-invert !default;
$button-color-active: $dark-invert !default;
$button-color-focus: $dark-invert !default;
$button-color-inverted: $primary !default;
$button-color-inverted-hover: $light-invert !default;
$button-color-inverted-active: $dark !default;
$button-color-inverted-focus: $dark !default;
$button-background-color: $primary !default;
$button-background-color-hover: $light !default;
$button-background-color-active: $dark !default;
$button-background-color-focus: $dark !default;
$button-background-color-inverted: $primary-invert !default;
$button-background-color-inverted-hover: $light !default;
$button-background-color-inverted-focus: $light !default;
$button-background-color-inverted-active: $light !default;
$button-border-color: $button-background-color !default;
$button-border-color-active: $button-background-color-active !default;
$button-border-color-focus: $black !default;
$button-border-width: .15rem;
$button-border-radius: 1.8rem;

@mixin button_colors($button-color-mixin-background, $button-color-mixin-text, $button-color-mixin-border) {
    color: $button-color-mixin-text !important;
    background-color: $button-color-mixin-background !important;
    border-color: $button-color-mixin-border !important;

    .icon {
        fill: $button-color-mixin-text !important;
    }
}

.button {
    @extend %control;
    @extend %unselectable;

    height: auto;
    background-color: $button-background-color;
    border-color: $button-border-color;
    border-width: $button-border-width;
    border-radius: $button-border-radius;
    color: $button-color;
    cursor: pointer;
    font-weight: $weight-medium;
    font-family: $family-secondary;
    font-size: .9375rem;

    justify-content: center;
    padding: .625rem 1.875rem;

    text-align: center;
    white-space: normal;
    text-decoration: none !important;

    @include from($tablet) {
        font-size: .88235rem;
        padding-right: 1.764rem;
        padding-left: 1.764rem;
    }

    .icon {
        width: 1rem;
        height: 1rem;
        margin-left: 1.75rem !important;
        margin-right: -.5rem !important;
        fill: $button-color;
    }

    &.is-outlined {
        color: $button-color-inverted;
        background-color: transparent;
        border-color: $button-border-color;

        .icon {
            fill: $button-color-inverted;
        }
    }

    &.is-borderless {
        color: $button-color;
        background-color: $button-background-color;
        border-color: transparent;

        .icon {
            fill: $button-color;
        }
    }

    &.is-inverted {
        color: $button-color-inverted;
        background-color: $button-background-color-inverted;
        border-color: $button-color-inverted;

        .icon {
            fill: $button-color-inverted;
        }
    }

    &--icon {
        .icon {
            margin-left: .75rem !important;
            margin-right: -.3rem !important;
        }
    }

    &.is-small {
        padding: .36rem 1.5rem !important;
        border-radius: 1.7rem !important;

        .icon {
            display: none;
        }
    }

    // Then the color variation generation
    @each $name, $pair in $button-colors {
        $button-pair-primary: nth($pair, 1);
        $button-pair-primary-invert: nth($pair, 2);

        $button-pair-primary-hover: bulmaDarken($button-pair-primary, 10%);
        $button-pair-primary-hover-invert: $button-pair-primary-invert;

        $button-pair-primary-active: bulmaDarken($button-pair-primary, 25%);
        $button-pair-primary-active-invert: $button-pair-primary-invert;

        $button-pair-primary-focus: $button-pair-primary-hover;
        $button-pair-primary-focus-invert: $button-pair-primary-hover-invert;

        &.is-#{$name} {
            @include button_colors($button-pair-primary, $button-pair-primary-invert, transparent);

            &:hover,
            &.is-hovered {
                @include button_colors($button-pair-primary-hover, $button-pair-primary-hover-invert, $button-pair-primary-hover-invert);
            }

            &:focus,
            &.is-focused {
                @include button_colors($button-pair-primary-focus, $button-pair-primary-focus-invert, $button-pair-primary-focus-invert);
            }

            &:active,
            &.is-active {
                @include button_colors($button-pair-primary-active, $button-pair-primary-active-invert, transparent);
            }

            &.is-outlined {
                @include button_colors(transparent, $button-pair-primary, $button-pair-primary);

                &:hover {
                    @include button_colors(transparent, $button-pair-primary-hover, $button-pair-primary-hover);
                }

                &:focus {
                    @include button_colors(transparent, $button-pair-primary-focus, $button-pair-primary-focus);
                }
            }

            &.is-borderless {
                @include button_colors($button-pair-primary, $button-pair-primary-invert, transparent);
                border-color: transparent !important;

                &:focus,
                &.is-focused {
                    @include button_colors($button-pair-primary-focus, $button-pair-primary-focus-invert, transparent);
                }

                &:active,
                &.is-active {
                    @include button_colors($button-pair-primary-active, $button-pair-primary-active-invert, transparent);
                }

                &:hover,
                &.is-hovered {
                    @include button_colors($button-pair-primary-hover, $button-pair-primary-hover-invert, transparent);
                }
            }

            &-invert,
            &.is-inverted {
                @include button_colors($button-pair-primary-invert, $button-pair-primary, $button-pair-primary);

                &:hover,
                &.is-hovered {
                    @include button_colors($button-pair-primary-hover, $button-pair-primary-hover-invert, $button-pair-primary-hover-invert);
                }

                &:focus,
                &.is-focused {
                    @include button_colors($button-pair-primary-focus, $button-pair-primary-focus-invert, $button-pair-primary-focus-invert);
                }

                &:active,
                &.is-active {
                    @include button_colors($button-pair-primary-active-invert, $button-pair-primary-active, transparent);
                }

                &.is-outlined {
                    @include button_colors(transparent, $button-pair-primary-invert, $button-pair-primary-invert);

                    &:active {
                        @include button_colors(transparent, $button-pair-primary-active-invert, $button-pair-primary-active);
                    }

                    &:hover {
                        @include button_colors(transparent, $button-pair-primary-hover-invert, $button-pair-primary-hover);
                    }

                    &:focus {
                        @include button_colors(transparent, $button-pair-primary-focus-invert, $button-pair-primary-focus);
                    }
                }

                &.is-borderless {
                    @include button_colors($button-pair-primary-invert, $button-pair-primary, transparent);

                    &:focus,
                    &.is-focused {
                        @include button_colors($button-pair-primary-focus, $button-pair-primary-focus-invert, transparent);
                    }
                    &:active,
                    &.is-active {
                        @include button_colors($button-pair-primary-active, $button-pair-primary-active-invert, transparent);
                    }
                    &:hover,
                    &.is-hovered {
                        @include button_colors($button-pair-primary-hover, $button-pair-primary-hover-invert, transparent);
                    }
                }
            }
        }
    }


}
